<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NB Tandan ‚Äî Nepal √ó Canada</title>
  <meta name="description" content="NB Tandan: Building bridges between Nepal and Canada through tourism, culture, and community." />
  <link rel="icon" href="assets/img/favicon.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --np-red:#DC143C; --np-blue:#003893; --ca-red:#D32F2F; --white:#ffffff;
      --ink:#0b1020; --muted:#9aa4b2; --bg:#060910; --card:#0d1322; --glass:rgba(255,255,255,.06);
      --ring:0 0 0 3px rgba(220,20,60,.25)
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Manrope,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:
      radial-gradient(1200px 800px at 100% -10%,rgba(0,56,147,.35),transparent 60%),
      radial-gradient(1200px 800px at -20% 10%,rgba(211,47,47,.35),transparent 60%),
      var(--bg);color:#eaf1ff;line-height:1.6}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:1200px;margin:auto;padding:0 24px}

    /* Header */
    header{position:sticky;top:0;z-index:80;backdrop-filter:saturate(140%) blur(10px);background:rgba(6,9,16,.65);border-bottom:1px solid var(--glass)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:14px}
    .brand .logo{width:44px;height:44px;border-radius:50%;object-fit:cover;border:2px solid var(--white)}
    .brand h1{margin:0;font-size:18px;letter-spacing:.4px}
    .accent-flag{display:inline-grid;grid-auto-flow:column;gap:0;align-items:center}
    .accent-flag i{display:inline-block;width:12px;height:12px}
    .np{background:linear-gradient(135deg,var(--np-red),var(--np-blue))}
    .ca{background:linear-gradient(135deg,var(--ca-red),var(--white))}

    .nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    .nav a{padding:8px 12px;border-radius:12px;color:#c7d2e1;font-weight:800}
    .nav a:hover,.nav a.active{color:#101522;background:linear-gradient(90deg,var(--white),#d9e3ff)}
    .cta{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:14px;font-weight:900;color:#001325;background:linear-gradient(90deg,var(--np-red),var(--ca-red));box-shadow:0 6px 18px rgba(211,47,47,.25)}

    /* Hero */
    #hero{position:relative;overflow:hidden}
    .hero-wrap{display:grid;grid-template-columns:1.15fr .85fr;gap:46px;align-items:center;padding:90px 0}
    .hero-eyebrow{display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid var(--glass);backdrop-filter:blur(6px);font-weight:900}
    .hero h2{font-size:56px;line-height:1.05;margin:14px 0 6px;font-weight:900}
    .np-sub{display:block;color:#cfe1ff;font-weight:800;margin:2px 0 18px}
    .hero p{color:#b6c2d6;margin:0 0 22px}
    .hero-cta{display:flex;gap:12px;flex-wrap:wrap}
    .hero-card{position:relative;border-radius:18px;overflow:hidden;background:var(--card);border:1px solid var(--glass);box-shadow:0 30px 80px rgba(0,0,0,.35)}
    .hero-card::after{content:"";position:absolute;inset:auto -40px -40px auto;width:220px;height:220px;background:conic-gradient(from 0deg,var(--np-red),var(--np-blue),var(--ca-red));filter:blur(20px);opacity:.25;border-radius:50%}
    .hero-flags{display:grid;grid-template-columns:1fr 1fr}
    .hero-flags img{height:100%;object-fit:cover}

    .divider{position:relative;height:18px;background:linear-gradient(90deg,var(--np-blue) 0 25%,var(--np-red) 25% 50%, var(--white) 50% 62.5%, var(--ca-red) 62.5% 100%)}
    .divider::before{content:"";position:absolute;left:0;top:-18px;border-left:45px solid transparent;border-right:45px solid transparent;border-bottom:18px solid var(--np-blue)}
    .divider::after{content:"";position:absolute;right:0;bottom:-18px;border-left:45px solid transparent;border-right:45px solid transparent;border-top:18px solid var(--ca-red)}

    /* Sections */
    section{padding:70px 0;border-top:1px solid var(--glass)}
    .section-title{display:flex;align-items:center;gap:12px;margin:0 0 24px}
    .section-title .dot{width:12px;height:12px;border-radius:50%;background:linear-gradient(135deg,var(--np-red),var(--np-blue));box-shadow:0 0 0 6px rgba(0,56,147,.18)}
    h3{margin:0;font-size:30px}
    h3 .np-sub{font-size:16px}
    .grid{display:grid;gap:20px}
    .card{background:var(--card);border:1px solid var(--glass);border-radius:18px;padding:22px}
    .muted{color:#aab7cc}

    .about{grid-template-columns: 340px 1fr}
    .kv{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:14px}
    .kv div{background:rgba(255,255,255,.05);padding:12px;border-radius:12px}

    .timeline{display:grid;gap:14px}
    .step{display:grid;grid-template-columns:120px 1fr;gap:16px;align-items:start;padding:14px;border:1px dashed rgba(255,255,255,.12);border-radius:14px}
    .step .year{font-weight:900;color:#d9e3ff}

    .impact{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .impact .icon{width:42px;height:42px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--np-blue),var(--np-red));margin-bottom:10px}

    .gallery-intro{margin-top:-6px}
    .masonry{column-count:4;column-gap:14px}
    .masonry a{break-inside:avoid;display:block;margin:0 0 14px;border-radius:14px;overflow:hidden;border:1px solid var(--glass);position:relative}
    .masonry img{width:100%;height:auto;display:block}
    .masonry a::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.25));opacity:0;transition:opacity .25s}
    .masonry a:hover::after{opacity:1}

    .lightbox{position:fixed;inset:0;background:rgba(6,9,16,.92);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:100}
    .lightbox.open{display:flex}
    .lb-inner{position:relative;max-width:min(92vw,1200px);max-height:88vh}
    .lb-img{max-width:100%;max-height:88vh;border-radius:12px;box-shadow:0 10px 60px rgba(0,0,0,.6);border:1px solid var(--glass)}
    .lb-close,.lb-prev,.lb-next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.08);border:1px solid var(--glass);color:#fff;width:44px;height:44px;border-radius:12px;display:grid;place-items:center;cursor:pointer}
    .lb-close{top:-56px;right:0;transform:none}
    .lb-prev{left:-56px}
    .lb-next{right:-56px}

    .media-grid{grid-template-columns:repeat(auto-fit,minmax(320px,1fr))}
    .ratio{position:relative;width:100%;padding-top:56.25%;border-radius:14px;overflow:hidden;border:1px solid var(--glass)}
    .ratio iframe{position:absolute;inset:0;width:100%;height:100%}

    /* Contact */
    .contact-grid{grid-template-columns: 1fr .9fr}
    form{display:grid;gap:14px}
    label{display:grid;gap:6px}
    input,textarea{background:#0f1627;color:#eaf1ff;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:14px 16px;font:inherit;min-height:44px}
    textarea{min-height:130px;resize:vertical}
    input::placeholder,textarea::placeholder{color:#8fa1b8}
    input:focus,textarea:focus{outline:none;box-shadow:var(--ring);border-color:var(--np-red)}
    .contact-form{margin-left:18px;padding:26px 28px;border-left:3px solid rgba(220,20,60,.35)}
    .contact-form button{border:0;border-radius:14px;padding:14px 16px;font-weight:900;cursor:pointer;background:linear-gradient(90deg,var(--np-blue),var(--np-red),var(--ca-red));color:#fff}

    footer{padding:40px 0;color:#aab7cc;text-align:center;border-top:1px solid var(--glass)}

    #topbtn{position:fixed;right:16px;bottom:16px;width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,var(--np-red),var(--np-blue));color:#fff;border:1px solid var(--glass);box-shadow:0 10px 30px rgba(0,0,0,.35);cursor:pointer;opacity:0;transform:translateY(10px);transition:.25s}
    #topbtn.show{opacity:1;transform:none}

    @media (max-width:1100px){ .masonry{column-count:3} }
    @media (max-width:820px){ .hero-wrap{grid-template-columns:1fr} .about{grid-template-columns:1fr} .masonry{column-count:2} .contact-form{margin-left:0;border-left:none} }
    @media (max-width:540px){ .masonry{column-count:1} }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="#top" aria-label="NB Tandan Home">
        <img class="logo" src="assets/img/my-profile-img.jpg" alt="NB Tandan" />
        <div>
          <h1>NB Tandan</h1>
          <div class="accent-flag" aria-hidden="true"><i class="np"></i><i class="ca"></i></div>
        </div>
      </a>
      <ul>
        <li><a class="active" href="#hero">Home / ‡§ò‡§∞</a></li>
        <li><a href="#about">About / ‡§¨‡§æ‡§∞‡•á‡§Æ‡§æ</a></li>
        <li><a href="#impact">Impact / ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ</a></li>
        <li><a href="#gallery">Gallery / ‡§ó‡•ç‡§Ø‡§æ‡§≤‡•á‡§∞‡•Ä</a></li>
        <li><a href="#media">Media / ‡§Æ‡§ø‡§°‡§ø‡§Ø‡§æ</a></li>
        <li><a href="#contact" class="cta">Get in touch / ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï</a></li>
      </ul>
    </div>
  </header>

  <main id="top" class="hero">
    <section id="hero">
      <div class="container hero-wrap">
        <div>
          <span class="hero-eyebrow"><span class="accent-flag"><i class="np"></i><i class="ca"></i></span> Nepal √ó Canada ‚Ä¢ ‡§®‡•á‡§™‡§æ‡§≤ √ó ‡§ï‡•ç‡§Ø‡§æ‡§®‡§°‡§æ</span>
          <h2>Building cultural, tourism, and trade bridges across borders.<span class="np-sub">‡§∏‡•Ä‡§Æ‡§æ‡§™‡§æ‡§∞ ‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï, ‡§™‡§∞‡•ç‡§Ø‡§ü‡§® ‡§∞ ‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞‡§ï‡§æ ‡§™‡•Å‡§≤‡§π‡§∞‡•Ç ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ó‡§∞‡•ç‡§¶‡•à‡•§</span></h2>
          <p>Entrepreneur, community organizer, and advocate for responsible tourism ‚Äî amplifying Nepal‚Äôs heritage while forging partnerships in Canada.</p>
          <div class="hero-cta">
            <a class="cta" href="#impact">Explore Impact</a>
            <a class="cta" style="background:linear-gradient(90deg,var(--white),#e4eef9);color:#0d1322" href="https://www.linkedin.com/in/nar-bahadur-tandan-52074434/" target="_blank" rel="noopener">Connect on LinkedIn</a>
          </div>
        </div>
        <div class="hero-card">
          <div class="hero-flags">
            <img src="assets/img/flag.png" alt="Nepal & Canada flags" />
            <img src="assets/img/hero-bg.jpg" alt="Cultural & landscape collage" />
          </div>
        </div>
      </div>
      <div class="divider" aria-hidden="true"></div>
    </section>

    <section id="about">
      <div class="container">
        <div class="section-title"><span class="dot"></span><h3>About NB Tandan <span class="np-sub">/ ‡§¨‡§æ‡§∞‡•á‡§Æ‡§æ</span></h3></div>
        <div class="grid about">
          <div class="card">
            <img src="assets/img/my-profile-img1.jpg" alt="NB Tandan portrait" style="border-radius:14px" />
            <div class="kv">
              <div><strong>Based</strong><br><span class="muted">Canada & Nepal</span></div>
              <div><strong>Focus</strong><br><span class="muted">Tourism ‚Ä¢ Culture ‚Ä¢ Community</span></div>
              <div><strong>Languages</strong><br><span class="muted">English ‚Ä¢ Nepali</span></div>
              <div><strong>Follow</strong><br><a href="https://www.facebook.com/nb.tandan">facebook.com/nb.tandan</a></div>
            </div>
          </div>
          <div class="card">
            <h4 style="margin:0 0 10px">Story <span class="np-sub">/ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ</span></h4>
            <p class="muted">From grassroots organizing to international collaboration, NB Tandan‚Äôs journey is about connecting people with purpose ‚Äî celebrating Nepali identity while forging lasting ties with Canadian communities.</p>
            <div class="timeline">
              <div class="step"><div class="year">Early</div><div>Mobilized Nepali diaspora networks, promoting cultural pride and mutual support.</div></div>
              <div class="step"><div class="year">Growth</div><div>Partnered with organizations and cities to showcase Nepal‚Äôs tourism and heritage.</div></div>
              <div class="step"><div class="year">Today</div><div>Leading initiatives that elevate trade, education, and cultural exchange between Nepal and Canada.</div></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="impact">
      <div class="container">
        <div class="section-title"><span class="dot"></span><h3>Initiatives & Impact <span class="np-sub">/ ‡§™‡§π‡§≤ ‡§∞ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ</span></h3></div>
        <div class="grid impact">
          <article class="card"><div class="icon">üèîÔ∏è</div><h4>Tourism Promotion <span class="np-sub">/ ‡§™‡§∞‡•ç‡§Ø‡§ü‡§® ‡§™‡•ç‡§∞‡§µ‡§∞‡•ç‡§¶‡•ç‡§ß‡§®</span></h4><p class="muted">Showcasing Nepal‚Äôs natural beauty and hospitality to international audiences; opening pathways for responsible travel and local opportunity.</p></article>
          <article class="card"><div class="icon">ü§ù</div><h4>Community Building <span class="np-sub">/ ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£</span></h4><p class="muted">Organizing multicultural festivals, rallies, and meetups that strengthen identity and friendship in the Nepali‚ÄìCanadian community.</p></article>
          <article class="card"><div class="icon">üìö</div><h4>Education & Relief <span class="np-sub">/ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§∞ ‡§∞‡§æ‡§π‡§§</span></h4><p class="muted">Supporting schools, health posts, and relief drives ‚Äî from equipment donations to emergency response.</p></article>
          <article class="card"><div class="icon">üåê</div><h4>Trade & Partnerships <span class="np-sub">/ ‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞ ‡§∞ ‡§≠‡§æ‡§ó‡•Ä‡§¶‡§æ‡§∞‡•Ä</span></h4><p class="muted">Connecting businesses across borders for shared growth, cultural exchange, and sustainable development.</p></article>
        </div>
      </div>
    </section>

    <section id="gallery">
      <div class="container">
        <div class="section-title"><span class="dot"></span><h3>Gallery <span class="np-sub">/ ‡§ó‡•ç‡§Ø‡§æ‡§≤‡•á‡§∞‡•Ä</span></h3></div>
        <p class="muted gallery-intro">Click any photo to view larger. / ‡§†‡•Ç‡§≤‡•ã ‡§π‡•á‡§∞‡•ç‡§®‡§ï‡§æ ‡§≤‡§æ‡§ó‡§ø ‡§ï‡•Å‡§®‡•à ‡§™‡§®‡§ø ‡§§‡§∏‡•ç‡§¨‡§ø‡§∞‡§Æ‡§æ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§</p>
        <div class="masonry" id="masonry"></div>
      </div>
    </section>

    <section id="media">
      <div class="container">
        <div class="section-title"><span class="dot"></span><h3>Media & Interviews <span class="np-sub">/ ‡§Æ‡§ø‡§°‡§ø‡§Ø‡§æ ‡§∞ ‡§Ö‡§®‡•ç‡§§‡§∞‡•ç‡§µ‡§æ‡§∞‡•ç‡§§‡§æ</span></h3></div>
        <div class="grid media-grid">
          <div class="card"><div class="ratio"><iframe src="https://www.youtube.com/embed/-JhBd6HxrGs?rel=0&modestbranding=1" title="NB Tandan Video 1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>
          <div class="card"><div class="ratio"><iframe src="https://www.youtube.com/embed/9R7v8b3gbrg?rel=0&modestbranding=1" title="NB Tandan Video 2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="container">
        <div class="section-title"><span class="dot"></span><h3>Get in touch <span class="np-sub">/ ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï</span></h3></div>
        <div class="grid contact-grid">
          <div class="card">
            <h4 style="margin:0 0 10px">Let‚Äôs collaborate <span class="np-sub">/ ‡§∏‡§π‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ó‡§∞‡•å‡§Å</span></h4>
            <p class="muted">Got an idea for cultural exchange, an event, or a partnership? Reach out and let‚Äôs make it happen.</p>
            <p class="muted"><strong>Facebook:</strong> <a href="https://www.facebook.com/nb.tandan">facebook.com/nb.tandan</a></p>
            <p class="muted"><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/nar-bahadur-tandan-52074434/">linkedin.com/in/nar-bahadur-tandan-52074434</a></p>
            <p class="muted"><strong>Email:</strong> <a href="mailto:nbtandan@gmail.com">nbtandan@gmail.com</a></p>
            <p class="muted"><strong>Location:</strong> Brampton, Ontario</p>
          </div>
          <form class="card contact-form" onsubmit="event.preventDefault(); alert('Thanks! Your message has been sent.');">
            <label>
              <span class="muted">Your name / ‡§§‡§™‡§æ‡§à‡§Ç‡§ï‡•ã ‡§®‡§æ‡§Æ</span>
              <input required placeholder="Full name" />
            </label>
            <label>
              <span class="muted">Email / ‡§á‡§Æ‡•á‡§≤</span>
              <input type="email" required placeholder="you@example.com" />
            </label>
            <label>
              <span class="muted">Message / ‡§∏‡§®‡•ç‡§¶‡•á‡§∂</span>
              <textarea rows="5" required placeholder="How can we collaborate?"></textarea>
            </label>
            <button type="submit">Send message / ‡§™‡§†‡§æ‡§â‡§®‡•Å‡§π‡•ã‡§∏‡•ç</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div style="display:flex;justify-content:center;gap:14px;margin-bottom:8px">
        <a href="#hero" class="muted">Home</a> ‚Ä¢
        <a href="#about" class="muted">About</a> ‚Ä¢
        <a href="#impact" class="muted">Impact</a> ‚Ä¢
        <a href="#gallery" class="muted">Gallery</a>
      </div>
      <small>¬© <span id="y"></span> NB Tandan ‚Äî Nepal √ó Canada.</small>
    </div>
  </footer>

  <button id="topbtn" aria-label="Back to top" title="Back to top">‚Üë</button>

  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
    <div class="lb-inner">
      <img class="lb-img" id="lbImg" alt="Gallery image" />
      <button class="lb-close" id="lbClose" aria-label="Close">‚úï</button>
      <button class="lb-prev" id="lbPrev" aria-label="Previous">‚Äπ</button>
      <button class="lb-next" id="lbNext" aria-label="Next">‚Ä∫</button>
    </div>
  </div>

  <script>
    const $ = (q,root=document)=>root.querySelector(q);
    const $$ = (q,root=document)=>Array.from(root.querySelectorAll(q));

    const navLinks = $$('.nav a');
    const setActive = () => {
      let hash = '#hero';
      $$('main section').forEach(sec=>{ const r = sec.getBoundingClientRect(); if(r.top < innerHeight*0.35) hash = '#' + sec.id; });
      navLinks.forEach(a=> a.classList.toggle('active', a.getAttribute('href')===hash));
    };
    document.addEventListener('scroll', setActive, {passive:true});
    setActive();

    const topbtn = $('#topbtn');
    const onScroll = () => { topbtn.classList.toggle('show', scrollY > 640); };
    document.addEventListener('scroll', onScroll, {passive:true}); onScroll();
    topbtn.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));

    // Masonry gallery (robust loader: zero-padded names + case-insensitive extensions + manual override)
    const gallery = $('#masonry');
    const emptyMsg = $('#galleryEmpty');
    const added = new Set();
    let appendedCount = 0;

    const exts = ['jpg','jpeg','png','webp','JPG','JPEG','PNG','WEBP'];
    const ids = Array.from({length:200}, (_,k)=>k+1);
    const namePatterns = (i)=>[ String(i), String(i).padStart(2,'0'), String(i).padStart(3,'0') ];

    const manual = Array.isArray(window.GALLERY_FILES) ? window.GALLERY_FILES : [];

    function appendImg(src){
      if ([...gallery.querySelectorAll('img')].some(img=>img.getAttribute('src')===src)) return;
      const a = document.createElement('a');
      a.href = src; a.target = '_blank'; a.ariaLabel = 'Open image';
      const img = new Image(); img.loading = 'lazy'; img.alt = 'Gallery image'; img.src = src;
      img.onclick = (e)=>{ e.preventDefault(); openLightbox(src); currentIndex = src; };
      a.appendChild(img); gallery.appendChild(a);
      appendedCount++; if (emptyMsg && appendedCount>0) emptyMsg.style.display = 'none';
    }

    function tryLoadName(name, extIndex=0){
      if (extIndex>=exts.length) return;
      const src = `assets/img/portfolio/${name}.${exts[extIndex]}`;
      const test = new Image();
      test.onload = ()=> appendImg(src);
      test.onerror = ()=> tryLoadName(name, extIndex+1);
      test.src = src;
    }

    manual.forEach(name=>{ tryLoadName(name); });
    ids.forEach(i=> namePatterns(i).forEach(n => tryLoadName(n)));

    // Lightbox
    const lb = $('#lightbox'), lbImg = $('#lbImg');
    const lbClose = $('#lbClose'), lbPrev = $('#lbPrev'), lbNext = $('#lbNext');
    let currentIndex = 0;
    function openLightbox(src){ lbImg.src = src; lb.classList.add('open'); lb.setAttribute('aria-hidden','false'); }
    function closeLightbox(){ lb.classList.remove('open'); lb.setAttribute('aria-hidden','true'); }
    lbClose.addEventListener('click', closeLightbox);
    lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLightbox(); });
    document.addEventListener('keydown', (e)=>{ if(!lb.classList.contains('open')) return; if(e.key==='Escape') closeLightbox(); if(e.key==='ArrowLeft') prev(); if(e.key==='ArrowRight') next(); });

    function cycle(direction){
      const imgs = Array.from(document.querySelectorAll('.masonry img')).map(el=>el.getAttribute('src'));
      if (!imgs.length) return null;
      let idx = imgs.indexOf(lbImg.getAttribute('src'));
      if (idx === -1) idx = 0;
      idx = (idx + (direction==='next'?1:-1) + imgs.length) % imgs.length;
      openLightbox(imgs[idx]);
    }
    function prev(){ cycle('prev'); }
    function next(){ cycle('next'); }
    lbPrev.addEventListener('click', prev);
    lbNext.addEventListener('click', next);

    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
